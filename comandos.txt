cat		Permite visualizar el conteniedo de un archivo
$ cat prueba.txt

************************************************************************

ls		permite listar el contenido de un fichero
$ ls /home/Escritorio

****************************************************************************

cd		Cambiar directorio, comando que necesitas para acceder a un directorio
$ cd /home/Descargas

**********************************************************************************

touch		crea un archivo vacio, si el archivo existe actualiza la hora de modificación
$ touch /home/Escritorio/nuevo.txt

***********************************************************************************

mkdir		Crea un nuevo directorio tomando en cuenta la ubicación actual
$ mkdir /home/ejercicios

rmdir		Elimina un directorio y su contenido

*************************************************************************************

cp		Copia un archivo o directorio origena un archivo o directorio destino
$ /home/prueba.txt /home/respaldo/prueba.txt
		Para copiar de manera recursiva es decir la carpeta seleccionada con todas las sub-carpetas o carpetas que se encuentran dentro
		de ella en lugar de ejecutar el comanda para cada carpeta utilizamos la sintaxis -r
$cp -r /home/ejercicios /home/respaldos

******************************************************************************************

mv		mueve un archivo a una ruta especifíca, y a diferencia de cp lo elimina del origen y finaliza la operación
$ mv /home/prueba.txt /home/respaldos/prueba2.txt
		en la sintaxis se especifica primero el origen y luego el destino, si indicamos un nombre de destino diferente, mv moverá el
		archivo o directorio on el nuevo nombre

******************************************************************************************

rm		de remover es el comando necesario para borrar un archivo o directori. para borrar
$ rm /home/prueba.txt
		Este comando presenta varias opciones para borrar de forma recursiva y sin confirmacion utilizamos -fr
$rm -fr /home/respaldos

***********************************************************************************************************

pwd		comando que permite ver la ruta actual o ubicacion del moento de ejecutarlo
$pwd

*************************************************************************************************************

clear		De limpiar, limpia por completo nuestra terminal o con un comando rápido contrl + L
$ clear

*************************************************************************************************************

man		de manual muestra el manual de los comandos para saber como utilizarlos
$ man clear

**************************************************************************************************************

shutdown	Para apagar la pc
$ shutdown -h now

reboot		para reiniciar la pc
$ reboot

************************************************************************************************************************

Ficheros tar

Para poder empaquetar ficheros, utilizamos el siguiente comando:

tar -cvf archivo.tar /dir/a/comprimir/

    -c : indica a tar que cree un archivo.
    -v : indica a tar que muestre lo que va empaquetando.
    -f : indica a tar que el siguiente argumento es el nombre del fichero.tar.

En cambio para poder desempaquetar los ficheros .tar, utilizamos el siguiente comando:

tar -xvf archivo.tar

    -x : indica a tar que descomprima el fichero.tar.
    -v : indica a tar que muestre lo que va desempaquetando.
    -f : indica a tar que el siguiente argumento es el nombre del fichero a desempaquetar.

Si se quiere ver el contenido de un fichero .tar, se utiliza el siguiente comando:

tar -tf archivo.tar

    -t : Lista el contenido del fichero .tar
    -f : indica a tar que el siguiente argumento es el nombre del fichero a ver.

********************************************************************************************************************

Ficheros gz

Para comprimir ficheros en formato .gz, se utiliza el siguiente comando:

gzip -9 fichero

    -9 : le indica a gz que utilice el mayor factor de compresión posible.

Para descomprimir ficheros .gz, se utilizara el siguiente comando:

gzip -d fichero.gz

    -d : indica descompresión

***************************************************************************************************************************

Ficheros bz2

Para comprimir ficheros en formato bz2, se utiliza el siguiente comando:

bzip fichero

Para descomprimir ficheros .bz2, se usa el comando siguiente:

bzip2 -d fichero.bz2

    -d : indica descompresión.
Nota: Tanto el compresor gzip como bzip2, solo comprimen ficheros, no directorios, para comprimir directorios (carpetas), se debe de usar en combinación con tar.

************************************************************************************************************************

Fciheros tar.gz

Para comprimir ficheros en formato tar.gz, se utiliza el siguiente comando:

tar -czfv archivo.tar.gz ficheros

    -c : indica a tar que cree un archivo.
    -z : indica que use el compresor gzip
    -f : indica a tar que el siguiente argumento es el nombre del fichero.tar
    -v : indica a tar que muestre lo que va empaquetando

Para descomprimir ficheros con extensión tar.gz, se usa el siguiente comando:

tar -xzvf archivo.tar.gz

    -x : le dice a tar que extraiga el contenido del fichero tar.gz
    -z : le indica a tar que esta comprimido con gzip
    -v : va mostrando el contenido del fichero
    -f : le dice a tar que el siguiente argumento es el fichero a descomprimir.

Para poder ver el contenido de un fichero comprimido en tar.gz, se usa el siguiente comando:

tar -tzf archivo.tar.gz

**************************************************************************************************

Ficheros tar.bz2

Para comprimir en tar.bz2 usaremos un “truco”, mediante el uso del parámetro pipeline ( | ). Esto permite hacer que dos programas trabajen “juntos”.

tar -c ficheros | bzip2 > archivo.tar.bz2

Para descomprimir ficheros tar.bz2, se utiliza el siguiente comando:

bzip2 -dc archivo.tar.bz2 | tar -xv

Y para ver el contenido de un fichero tar.bz2, se usa el siguiente comando:

bzip2 -dc archivo.tar.bz2 | tar -t

*********************************************************************************************************

Ficheros zip

	Para poder comprimir en formato zip, se usara el comando siguiente:

	zip archivo.zip ficheros a comprimir

	Para poder descomprimir los ficheros zip, se usa el siguiente comando:

	unzip archivo.zip

Para ver el contenido de un fichero zip, se pone el siguiente comando:

	unzip -v archivo.zip

******************************************************************************************************************

Ficheros rar

	Para comprimir en formato rar, se usara el siguiente comando:

rar -a archivo.rar ficheros

Para descomprimir ficheros en formato rar, se utiliza el siguiente comando:

unrar -x archivo.rar

Para ver el contenido de un fichero rar, se usa el siguiente comando:

unrar -v archivo.rar
unrar -l archivo.rar

**************************************************************************************************************************

ll		muestra los archivos del directorio actual en forma de lista incluyendo los archivos ocultos
$ ll

****************************************************************************************************************************

Mostrar diferencias entre dos archivos
diff archivo1 archivo2
diff /etc/php/7.2/apache2/php.ini /etc/php/7.2/cli/php.ini
sdiff

******************************************************************************************************

$ git diff		para ver lo que has modificado
git diff --cached

$ git commit		Para confirmar tus cambios
git commit "cambios"


git push origin master		Cuando tu proyecto se encuentra en un estado que quieres compartir, tienes que enviarlo a un repositorio remoto. El comando que te permite hacer esto es sencillo: git push [nombre-remoto][nombre-rama]. Si quieres enviar tu rama maestra (master) a tu servidor origen (origin),

***********************************************************************************************************

adduser		Creación de usuario
$ adduser juma

cat /etc/passwd | cut -d":" -f1 	Lista de usuarios creados

passwd nombreusuario	Asignar contraseña a usuario
$ passwd juma

visudo		para entrar al archivo sudoers y darle privilegios a los usuarios

vi		para visualizar los archivos y poder editarlos
$ vi /home/juma/Escritorio/juma.php

**************************************************************************************************************************

du -hs *		muestra los archivos y su capacidad en disco dentro del directorio que nos encontramos

***********************************************************************************************************************

crontab -l	 Lista los crones instalados

crontab -r	BORRAR CRONES CUIDADO

crontab -e       para editar archivo crontab   ( esc  + i para empezar a editar o insertar lineas , esc + :wq guardar y salir )

verificar actividad del cron

tail -10f /var/log/cron

************************************************************************************************************************

Credenciales BELCORD
172.19.215.131

****************************************************************************************************************************

DocumentRoot		Es donde se encuentran alojados los aplicativos /var/www/html/ .... tambien pueden estar en /app/ ....

*************************************************************************************************************************

vi		Para visualizar y editar un archivo

De esta manera cuando nos dicen que algo se encuentra sobre la linea X lo podremos encontrar mucho más fácilmente

:set number
o
:set nu

Para quitar el número de línea se debe entrar con el mismo comando:
:set nu!

Otra opción que tenemos es activar de manera automática esta opción para que cuando entremos, directamente venga con los números de líneas.

Para hacerlo, solo hay que agregarl la siguiente línea en el archivo ~/.vimrc:
set number

Guardamos, cerramos y ahora ya podemos disfrutar.

Otra opción que tenemos es ir directamente a la línea que queremos modificar.

Para ello, hay que hacerlo de la siguiente manera:
$ vi +300 home.php

*************************************************************************************************************************

Solución de falla de correo electronico


nano /etc/hosts
comentas la linea de api.mailgun.net
guardas y cierras
ejecutas
ping api.mailgun.net
tomas la ip que sale ahora y la colocas en el archivo
/etc/hosts

***************************************************************************************************************************

DF 	indica el espacio en disco: disponible, usado y total.

DU 	muestra cuanto espacio ocupa un archivo o un grupo de ellos.

du archivo.txt

	Puedes averiguar, por ejemplo, cuanto espacio ocupan, por separado (con -s), los archivos con determinada extensión.

du -s *.txt

*********************************************************************************************************************************

FIND 		de encontrar. No es práctico navegar por todas las carpetas y subcarpetas, por lo que encontrar un archivo o carpeta concretos es imprescindible.

Por defecto, el comando muestra una lista con todas las carpetas, subcarpetas y archivos a partir de la carpeta donde te encuentras.

find

	Puedes limitar la lista mostrada a unas carpetas específicas.

	find /documentos

	Incluso puedes ver un listado de archivos y carpetas que contengan una palabra o combinación de caracteres. En el ejemplo buscamos 		directorios y ficheros con 2017 en el nombre.

find -name ‘2017’

find /documentos/fotos -name ‘2017’

*********************************************************************************************************************************************

KILL

Si un programa te da problemas tienes la posibilidad de cerrarlo desde el terminal de Linux. Éste es uno de los comandos básicos más práctico cuando algo no va bien en tu PC.

Primero, necesitamos saber qué procesos están en funcionamiento.

kill -L

Cuando sepamos qué número le corresponde al proceso que da problemas, lo cerramos. Puedes cerrar dos o más procesos a la vez indicando sus números por separado.

kill -l 10

Otra posibilidad para ver el número correspondiente al proceso problemático es con el comando TOP. El número a tener en cuenta está en la columna de PPID.

También puedes matar todos los procesos posibles como último recurso.

kill -9 -1

************************************************************************************************************************
WAR
Detener el war "mn-pac-servicios.war"
Respaldar el war  "mn-pac-servicios.war"
Replegar el war "mn-pac-servicios.war"
Desplegar el war adjunto "mn-pac-servicios.war".
Manager APP
Se hacen desde el explorar web en tomcat gestor de aplicaciones web de tomcat para detener se le da en parar y para replegar en la pestaña replegar, para deplegar se tiene que tener descargado el archivo y en la parte de abajo se da despelgar se busca el archivo y se agrega .

***************************************************************************************************************************

ifconfig		para conocer la ip de nuestro ordenador
			inet 10.0.80.116
		En red local
		lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0

******************************************************************************************************************************
alertas

pstree -p | grep mysql		Alertas load average
ps aux | grep mysql

Ordenar archivos para saber cual es el mas pesado

du -sh * | sort -h
du -sh du -sh kio/*

depurar log sin borrarlo
cat /dev/null > file_log.txt

df -h
du -sh *	ver cuales son los archivos mas pesados

rm -rf /ruta/de/los/archivos/log/.log*

Para vaciar los logs sin borrarlos

cat /dev/null > /app/www/html/kio/eexpenses/admin/skill/query.log
cat /dev/null > /app/www/html/kio/eexpenses/flujos/comprobaciones/services/query.log
cat /dev/null > /app/www/html/kio/eexpenses/flujos/solicitudes/query.log
cat /dev/null > /app/www/html/kio/eexpenses/reportes/query.log

Borra todos los archivos dentro de esa ruta que tengan la extencion PDF
rm -rf  /app/www/html/kio/eexpenses/uploadservice/tmp/*.pdf


Buscar y borrar archivos por tiempo
Este comando busca en /ruta/a/archivos por todos los archivos creados hace siete días o más. Modifique la ruta para reflejar la carpeta en que desea buscar. Modifique +7 al numero de días que desea

find    /app/www/html/smartfit/boveda/logs/*.log -mtime +7 -exec rm {} \;

find    /app/www/html/sportium/boveda/logs/*.log -mtime +7 -exec rm {} \;

find    /app/www/html/proteak/boveda/logs/*.log -mtime +7 -exec rm {} \;

find    /app/www/html/proteak/boveda_16032018/logs/*.log -mtime +7 -exec rm {} \;

find    /app/www/html/nsk/boveda/logs/*.log -mtime +7 -exec rm {} \;

find    /app/www/html/kio/boveda/logs/*.log -mtime +7 -exec rm {} \;


https://www.usuarioroot.com/identificar-los-procesos-que-hacen-un-uso-intensivo-de-la-cpu-y-de-la-memoria-ajustar-la-prioridad-de-los-procesos-con-renice-y-eliminar-procesos/


ps aux --width 30 --sort -rss | head

ps aux --sort pmem

ps aux | awk '{print $2, $4, $11}' | sort -k2r | head -n 10

ps -Ao user,uid,comm,pid,pcpu,tty --sort=-pcpu | head -n 6

Mostrar los 10 procesos que mas memoria consumen

ps aux --width 30 --sort -rss | head

lsof +L1		Muestra los procesos para ver los que están corriendo y generan problemas en el servidor
Tengo entendido que el comando anterior muestra los archivos que se han eliminado pero aún están abiertos. Estos archivos tienen un "recuento de enlaces" de 0, lo que significa que no hay ninguna entrada de directorio (ningún enlace, es decir, ningún nombre) que lleve a ellos, pero los datos del archivo todavía existen. Los datos del archivo se eliminarán cuando se cierre el archivo. Por lo general, veo referencias a este problema cuando las personas hablan de los archivos de registro en los que el sistema está escribiendo. El archivo se puede eliminar, pero el proceso continúa escribiendo en el archivo y ocupa más y más memoria. Otras personas han identificado esto a veces como un comportamiento malicioso de malware que intenta ocultarse.

******************************************************************************************************

Cómo entrar a VMPORTALESNO02? 172.20.36.199
ssh asist@172.20.36.199
pass :wfn85EXb


Extencion 7077

***********************************************************************************************************

FreeRDP

Instalar FreeRDP

Dado que la estructura de Escritorio Remoto es atraves de un cliente-servidor es necesario instalar el cliente en Linux con el siguiente comando:

Ubuntu

apt-get install freerdp-x11


Centos

yum install freerdp-x11

Conexion escritorio remoto

/mydock/md_reporte_edodecuenta_saldos_database.php

Por favor colocar la conexión correcta por favor.

server ==> 172.21.36.69

xfreerdp -u <usuario> -g <resolucion> <ip o dominio>

En el caso de avant
xfreerdp -u infra06 -g 1240x720 avantprd.masnegocio.com      IP 199.231.161.19

Despues pedira contraseña que es
usuario : administrator
Contraseña ; temporal@123

*************************************************************************************************************************

Conectar a base de datos remotamente
mysql -p -h 172.19.215.29

**********************************************************************************************************************

CREATE USER 'root'@'%' IDENTIFIED BY 'DBmnr00t.17%';
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;
FLUSH PRIVILEGIES

**********************************************************************************************************************

rm -rf *	borra todo lo que se encuentra dentro del directorio en el que estamos

yum remove mysql* 	remueve todo el mysql que este instalado

instalacion mysql8 en centos 7

wget https://repo.mysql.com/mysql80-community-release-el7-1.noarch.rpm
yum localinstall mysql80-community-release-el7-1.noarch.rpm
yum -y install mysql-community-server
service mysqld start
service mysqld status
mysql --version
tail /var/log/mysqld.log
mysql_secure_installation

*************************************************************************************************************************************


Correos para solicitar la ventana de mantenimiento de Avant o para notificarles
para TAD:
carlos.monzon@tad.com.mx
ghernandez@tad.com.mx
Lideres Mexicanos:  soporte@lideresmexicanos.com

****************************************************************************************************************************

RDP Remote Desktop Protocol es un protocolo desarollado por
Microsoft que permite la comunicación entre una aplicación y
una terminal (mostrando la información procesada que recibe e
servidor) y un servidor windows(recibiendo la información dada
por el usuario) Permite el acceso de una computadora remota a
una local.

Ubuntu

apt-get install freerdp-x11


Centos

yum install freerdp-x11

*****************************************************************************************************************************

SSH (secure shell) Es un protocolo de administración remota que
permite a los usuarios controlar y modificar sus servidores
remotos aa través de internet. El servicio se creó como un
reemplazo seguro para el telnet sin cifrar y utiliza técnicas
critográficas para garantizar que todas las comunicaciones
hacia y desde el servidor remoto sucedan de manera encriptada .

El comando SSH consta de 3 partes distintas:

ssh {user}@{host}

VNC (Virtual Network Computing) Computación virtual en Red

VNC es un programa de software libre basado en una estructura
cliente-servidor que permite observar las acciones del
ordenador servidor remotamente a través de un ordenador
cliente. VNC no impone restricciones en el sistema operativo
del ordenador servidor con respecto al del cliente: es posible
compartir la pantalla de una máquina con cualquier sistema
operativo que admita VNC conectándose desde otro ordenador o
dispositivo que disponga de un cliente VNC portado.

SCP Secure copy scp permite que los archivos se copien a, desde
o entre diferentes hosts. Utiliza ssh para la transferencia de
datos y proporciona la misma autenticación y el mismo nivel de
seguridad que ssh

**************************************************************************************************************

VPN
Virtual privte Network - Red privada virtual


  	para ver los servios que estan instalados

tail -20f /var/log/cron

***********************************************************************************************************

Solución de falla de correo electronico


nano /etc/hosts
comentas la linea de api.mailgun.net
guardas y cierras
ejecutas
ping api.mailgun.net
tomas la ip que sale ahora y la colocas en el archivo
/etc/hosts

******************************************************************************************************************

Comprimir archivo tar

tar -cvf eexpensesv3_bmw_PROD.tar /usr/local/zend/apache2/htdocs

************************************************************************************************************************

root@MN-BMWDEV
Contraseña ROOT
mnd3s4rr0ll0%
esa es la buena

****************************************************************************************************************************

[11:30, 13/11/2018] Nestor Perez: tengo una maquina docker
[11:30, 13/11/2018] Nestor Perez: 172.19.215.15
[11:30, 13/11/2018] Nestor Perez: necesito que hagas usuarios que solo se conecte por el puerto 22
[11:31, 13/11/2018] Nestor Perez: ahorita solo piden puerto 21 pero en algunas ocasiones requieren que la conexion sea por el 22
[11:31, 13/11/2018] Nestor Perez: has pruebas ahí
[11:31, 13/11/2018] Nestor Perez: o crea una maquina Centos por que esa es ubuntu
[11:32, 13/11/2018] Juan Manuel Pundt: va
[11:32, 13/11/2018] Nestor Perez: mejor crea una maquina centos
[11:32, 13/11/2018] Juan Manuel Pundt: Ahorita me documento deja hago el manual de esta mierda
[11:32, 13/11/2018] Nestor Perez: http://172.19.215.5:9869/#vms-tab
[11:32, 13/11/2018] Nestor Perez: ahí creala

***********************************************************************************************************

Serv PMN02 	172.28.82.205
Ruta aplicativo
/usr/local/zend/ahe2/htdocs/cruzroja/face5/f4
Ruta Respaldo
/home/asist/cruzroja

mv 231118JM/ /home/asist/cruzroja/ mover archivos
diff /home/asist/cruzroja/231118JM/FtpCliente/ClienteFTP.php face5/f4/FtpCliente/ClienteFTP.php 			ver diferencias entre archivos
cp -r FtpCliente/ 231118JM/

*********************************************************************************************************************

la sigla QA significa Quality Assurance, o aseguramiento de la calidad

********************************************************************************************************************

curl https://ipinfo.io/ip 		para saber la ip publica de nuestro ordenador

curl -l nombre de dominio

Te muestra todo lo que se encuentra dentro del dominio (codigo)


******************************************************************************************************************************

cat /dev/null > /proc/PID/fd/#		para eliminar procesos con el número de PID

***********************************************************************************************************************
Homologación

Pasos para mysql DUMP, Migrar BD

mysqldump -p -h 172.20.53.115 --opt --routines --single-transaction fcemtidev01 > dumpmarti.sql
mysqldump -p -h 172.20.53.115 --opt --routines --single-transaction fcemtidev01 > dumpmarti.sql
mysqldump -p -h 172.21.36.40 --opt --routines --single-transaction face_aliat > aliat.sql

mysqldump -pMNd3sDB4 -h 172.20.42.94 --opt --routines --single-transaction FCEANPQA1  > FCEANPQA1.sql &
hacer dump en segundo plano

mysql -p

mysql> create database nombre_base;
mysql> use nombre_base;
mysql> source /nombre/dela/ruta/nombre_archivo.sql

mysql> show tables;
use

Editar por si hay un error a la hora de cargar el dump

nano /etc/my.cnf
[mysqld]
innodb_file_per_table
max_allowed_packet =32M
max_connections = 1000
max_connect_errors = 10000
innodb_lock_wait_timeout = 300

************************************************************************************************************************
Buscar Archivos:
find / -name nombre_de_archivo

locate php.ini		Encontrar un archivo, en este casi será php.ini

locate miarchivo | grep bin


/Buscar archivos por tamaño de fichero/
 Para buscar archivos vacíos (el . indica el directorio en el que nos encontramos):

 find . -size 0c
Devolverá todos las rutas del sistema que contengan el nombre miarchivo y que además también aparezca el texto bin.

**********************************************

FacE CRM 172.28.82.205

********************************************

TOP
Dentro del programa podemos interactuar con el con varias opciones:

    k -> Si se quiere matar el proceso, luego debemos ingresar el numero de su PID.
    r -> Cambia la prioridad del proceso
    O (upercase) -> Muestra las posibles columnas que podemos agregar a la lista de procesos
    1 -> Muestra la información de todos los cores
    z o b -> Agregan colores a la interfaz
    c -> Muestra el path absoluto del binario que se esta ejecutando.
    n -> nos permite reducir la lista a “n” procesos.
    N (upercase) -> Ordena los procesos por PID
    A (upercase) -> Ordena los procesos por aparicion, primero se encuentran los mas nuevos
    P (upercase) -> Ordena los procesos por uso de CPU, esta opcion es la default
    M (upercase) -> Ordena los procesos por memoria residente
    T (upercase) -> Ordena los procesos por tiempo.
    W (upercase) -> Guarda la configuracion que hicimos
    q -> Salir de Top
******************************************
Enumerar un archivo PDF

:set number

*****************************

Saber cuál es mi php.ini

root@juma:/home/juma# php -i | grep 'Configuration File'
Configuration File (php.ini) Path => /etc/php/7.2/cli
Loaded Configuration File => /etc/php/7.2/cli/php.ini

**********************************

AVON

service httpd status
service nginx status
service php-fpm status
service php-fpm stop	Para detenerlo start para iniciarlo , es como reiniciar el servicio para que se pueda visualizar

************************************************+

Estructura de datos.

*************************************************

cat -n /ruta/archivo	para ver archivo enúmerado

***************************************************

certificado SSL 	Un certificado SSL sirve para brindar seguridad al visitante de su página web, una manera de decirles a sus clientes que el sitio es auténtico, real y confiable para ingresar datos 				personales. Las siglas SSL responden a los términos en inglés (Secure Socket Layer), el cual es un protocolo de seguridad que hace que sus datos viajen de manera íntegra y segura, es 				decir, la transmisión de los datos entre un servidor y usuario web, y en retroalimentación, es totalmente cifrada o encriptada. El que los datos viajen cifrados, nos referimos a que se 				emplean algoritmos 	matemáticos y un sistema de claves que sólo son identificados entre la persona que navega y el servidor. Al tener un certificado SSL confiable, nuestros datos 				están encriptados, en ese momento podemos asegurar que nadie puede leer su contenido. Todo esto nos lleva a entender que la tecnología que brinda un certificado SSL es la transmisión 				segura de información a través de internet, y así confirmar que los datos están libres de personas no deseadas. Para poder utilizar un certificado SSL, en su página web, es de vital 				importancia que el servidor de Internet que usted contrató, soporte SSL.

******************************************

Boveda mcdonals 172.21.36.154

Boveda kio 192.168.20.42

********************* LIMPIAR POOL DE CONEXIONES

/# free -m
/# /root/scrips/limpiamemoria.sh


*****************************************
SCP

scp /ruta/al/archivo-origen usuario@ordenador:/ruta/al/directorio-destino/

root@juma:/home/juma# scp /home/juma/Descargas/estatus_cancelacion.sql asist@172.20.36.228:/home/asist/
asist@172.20.36.228's password:
estatus_cancelacion.sql                     100% 2270   606.3KB/s   00:00




****************************************************

Vaciar archivo

cat /dev/null > ruta/el/archivo/que/queremos/vaciar

********************************************************

https://arcos.facturamcdonald s.com.mx/

172.21.36.155

*********************************************************

ps -A | grep firefox
ps aux | grep http	Buscar un proceso que hizo que no se detuviera el cron
Te muestra la lista de procesos que se esten ejecutando que lleven htttp

kill -9 idproceso

*****************************************************************

Conexión VPN

openvpn Nombre_del_archivo_vpn

*******************************************************

Alertas en tickets

Tipo de cierra -Falso positivo

Nota: Repaldos generados durante la noche


********************************************************************

Direcciones pac5		Public IP

172.21.36.153		PAC2	200.53.186.132
172.21.36.26		PAC1	200.53.186.131
172.19.215.22		PAC3	200.77.234.119


xfreerdp -u administrator -g 1240x720 direcciónip

Pass :	Pmn4dm1n.15%

***************************************************************************

Danone

Contraseña  Danone.1

base de datos    MNdb4r00t		MNDB4r00tenv

asist 		wfn85EXb@456

t3mp0r4l

> ** Expenses Danone
> Servidor: 10.19.200.126
> Ruta: /usr/local/zend/apache2/htdocs/eexpenses_danone
>
> ** Expenses Envasadoras
> Servidor: 10.19.200.28
> Ruta: /usr/local/zend/apache2/htdocs/envasadoras
*******************************************************************************

Tomcat Server

On Linux: /opt/Oracle/Middleware/opdq/server/tomcat/bin

On Windows: c:\Oracle\Middleware\opdq\server\tomcat\bin



Run the startup command:

On Linux: ./startup.sh

On Windows: % startup.bat


para detener

On Linux: ./shutdown.sh

On Windows: % shutdown.bat

***************************************************************************************

Configuración Nagios

Servidor 		172.21.36.75
        history | grep nagios
	nano /usr/local/nagios/etc/objects/localhost.cfg
  	service nagios restart


**************************************************************************

Cambiar nombre de archivo o fichero

mv -v file1 file2

mv file1 file2

**********************************************************************************

Por ejemplo, averigüe si el proceso mysqld (mysqld pid) se está ejecutando o no:
$ ps aux | grep mysqld

El comando pgrep busca el sistema en ejecución y muestra los identificadores de proceso de todos los procesos que coinciden con los criterios dados. La sintaxis es:
pgrep {processNameHere}
pgrep firefox
pgrep httpd
pgrep nginx

Encuentre el ID de proceso de un programa en ejecución usando pidof

# pidof mysqld

******************************************************************************************

IP

127.0.0.1

172.21.36.75

************************************************

DESHABILITAR USUARIOS EN AVANT

Inicio > Herramientas administrtrativas > Administracion de Equipos > Usuarios y Grupos locales > Usuarios > "Click derececho en usuario" > Propiedades > Check en " La cuenta esta desahabilitada" > Aplicar > Aceptar



*********************************************************

ps aux | grep mysql

La salida de "ps aux" es una tabla donde cada fila es un proceso y las columnas contienen la siguiente información:

    USER: usuario con el que se ejecuta el proceso
    PID: ID del proceso
    %CPU: porcentaje de tiempo que el proceso estuvo en ejecución desde que se inició
    %MEM: porcentaje de memoria física utilizada
    VSZ: memoria virtual del proceso medida en KiB
    RSS: "resident set size", es la cantidad de memoria física no swappeada que la tarea a utilizado (en KiB)
    TT: terminal que controla el proceso (tty)
    STAT: código de estado del proceso (información detallada más adelante)
    STARTED: fecha de inicio del proceso
    TIME: tiempo de CPU acumulado
    COMMAND: comando con todos sus argumentos

******************************************************************************

Muestra en lista todas las particiones
fdisk -l

*****************************************************************************

Borrar chache en linux mediante un cron

#!/bin/bash
echo “Limpiando la caché~ “;
1. Borrar solo PageCache
sync ; echo 1 > /proc/sys/vm/drop_caches

2. Borra los huecos e inodos.
sync ; echo 2 > /proc/sys/vm/drop_caches

3. Borrar PageCache, dentries e inodes.
sync ; echo 3 > /proc/sys/vm/drop_caches


**********************************************************************************************


nmap

Analizar un sistema y ver los puertos que tien con nmap es decir hacer un mapeo de la red

root@juma:/# nmap 172.21.36.6

Starting Nmap 7.60 ( https://nmap.org ) at 2019-01-10 12:02 CST
Nmap scan report for 172.21.36.6
Host is up (0.0047s latency).
Not shown: 989 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
111/tcp  open  rpcbind
443/tcp  open  https
2049/tcp open  nfs
5666/tcp open  nrpe
5907/tcp open  unknown
5998/tcp open  ncd-diag
5999/tcp open  ncd-conf
6003/tcp open  X11:3
6004/tcp open  X11:4

Nmap done: 1 IP address (1 host up) scanned in 15.29 seconds

Agregando la opcion v te da un mapeo mas detallado

nmap -v server2.mimaquina.com

Analizar toda una subred

nmap 192.168.0.*


***********************************************************************

Encontrar archivo httpd.conf

/etc/httpd/httpd.conf

/etc/apache2/httpd.conf

/etc/httpd/conf/httpd.conf

***********************************************************************

Nomina QA

172.19.215.78

***************************************************************************

BVDPRD:
192.168.20.73

PACv5
172.21.36.20

MCDFACE
172.21.36.28

BVDMCD
172.21.36.32

AVONFACE
172.21.36.39

BDPRD
172.21.36.40

TELETON
192.168.20.165

Para todas el usuario es root
Busquen el password en el archivo PMN INVENTARIO

Contraseña
DBmnr00t.15%




/var/www/html/eexpensesv2belcorp/datos/interfazSAP/

**********************************************************************************

#CRONES EXPENSES BELCORP PRODUCCION
00 22 * * * cd  /var/www/html/eexpensesv2belcorp/flujos/solicitudes; ./../../shell_scripts/interfazSAPanticipos.sh
30 22 * * * cd  /var/www/html/eexpensesv2belcorp/flujos/solicitudes; ./../../shell_scripts/interfazSAPproveedores.sh
45 22 * * * cd  /var/www/html/eexpensesv2belcorp/flujos/interfazrh; ./../../shell_scripts/interfazadam.sh


***********************************************************************************
RADWARE!
DDoS Attacks  ---- Ataque de denegación de servicios

https://portal.radwarecloud.com/in
Usuraio :	infraestructura@masnegocio.com
Password :wfn85EXb

*************************************************************

Versión del servidor

cat  /etc/issue
lsb_release -idc
cat /etc/debian_version
rpm --query centos-release

--version de Centos
cat /etc/redhat-release
*********************************************************

Enjaular usuario

Lista de usuarios creados
cat /etc/passwd | cut -d":" -f1

Crear usuario especificando la ruta a la cual quiere acceder

adduser -d /var/log/httpd/belcorp usuario

Agregamos la contraseña genérica al usuario creado

passwd usuario
54wp8w7

Después se crea el archivo en donde se va a enjaular el usuario

vi /bin/nombredelajaula

Dicho archivo debe contener algo similar a lo siguiente

#!bin/bash

/usr/sbin/chroot /var/log/httpd/belcorp/ /bin/bash

asi debe quedar el archivo suponiendo que la ruta en la que va a quedar enjaulado o a la que va acceder el usuario es /var/log/httpd/belcorp/

Lo siguiente es agregar el archivo que creamos a los shells este se encuentra en /etc/shells

nano /etc/shells

Ahí agregaremos al final el archivo que creamos previamente /bin/nombredelajaula

después de eso

usermod -s /bin/nombredelajaula nombreusuario

************************************************************
 ver la modificacion del archivo log por medio de un LOOP

 tail -f example.log

 ************************************
 Apuntes.
 No se necesita VoBo en ambientes QA.

 172.21.48.12 PHP-56-QA
 passwd 5Dd1Akw3

 172.21.36.40
 passwd DBmnr00t.17%

 172.21.48.14
 passwd MN4dm1n

 RADWARE  web aplication firewall


 conexión por DHCP es que te da una ip depende del segmento que tenga asignado para ofrecer la conexión DHCP


 *****************************************

 Correo para virtualización   virtualizacion@masnegocio

 Revisión maquina 172.20.53.118
 Recibidos
 	x
 Nestor Abel Perez Castro

 09:10 (Hace 1 hora.)

 para Virtualización, Infraestructura
 Buenos días requerimos de su apoyo para validar el estatus de la maquina 172.20.53.118 en caso de estar apagada, encenderla, es urgente

 Néstor Perez
 Administrador de Sistemas


 *************************************
 FCEAPP01

 Boveda kio 192.168.20.42   https://www.kioboveda.com/portal

 Boveda marti  https://www.proveedormarti.com/portal


 *********************

 Maquina PIX 172.20.36.216

 *******************************
 successfactors
 https://performancemanager8.successfactors.com
 C0016336671P
 Kio#Mexico19

 *****************************
 Conexión entre servidores

 Serían tan amables de revisar la dmz de smartfit, realizando un curl del servidor 172.20.53.147 a dmz.facemasnegocio.com.
 Verificar que se tenga conexión entre servidores.

 curl dmz.facemasnegocio.com

 ***********************************
VPN ADDCEL

ver usuarios
cat /etc/passwd | cut -d":" -f1

VPN
usuario : eini
pass : 54wp8w7

usuario : yazmins
pass : 54wp8w7

ADDCEL QA 192.168.75.53
BD 1 192.168.20.101
BD 2 192.168.20.102

************************************************
172.20.42.94
MNd3sDB4

***************************************

Verificar error log
 tail -f error_log

 cd /var/log/

 less error_log

 *******************************************
NTP

admin
wfn85EXb@456

172.20.27.50

****************************************************
Kibana

http://172.21.36.96
http://172.19.215.16
172.19.215.15

install
hypercx$123
**********************************************
Buenos dias, solicito su apoyo para cargar el siguiente WAR enviado previamente, en servidor 172.21.36.81 como carpeta alterna para QA

Cuando sea un archivo war se carga en Tomcat

<user username="admin" password="Pmnr00t.16"

/opt/tomcat/conf/tomcat-users.xml


https://core.masnegocio.com/
serv PMN-CORE
192.168.10.130


******************************************
Se solicita la creación de* usuarios de consulta *para las bases de datos Productivas del DWH PAC ubicadas en las IPs 172.19.215.125 (puertos 3306, 3307, 3308) 172.21.36.165 (puertos 3306, 3307, 3308) 192.168.20.138 (puertos 3306, 3307, 3308)

[root@PMN-DWH-PR2 2017]# nano /etc/systemd/system/mysql_multi.service
[root@PMN-DWH-PR2 2017]# mysqld_multi report
Reporting MariaDB servers
MariaDB server from group: mysqld1 is not running
MariaDB server from group: mysqld2 is running
MariaDB server from group: mysqld3 is running
MariaDB server from group: mysqld4 is running
MariaDB server from group: mysqld5 is running

nano /etc/my.cnf
mysqld_multi report

mysql -u root -S /var/run/mysqld/mysqld3.sock
GRANT SELECT ON *.* TO 'produccion'@'%' IDENTIFIED BY 'MN4dm1n' WITH GRANT OPTION;
Flush privileges;



User: amin,rconcha,soporte.
pass: MN4dm1n
pass: MNc0nch4@456
pass: MNs0p0rt3

se crearon tres usaurios de consulta acorde a lo que converso Nestor con Amin,

*********************************************************************************
Les comparto las ip's de los HSM:

Tultitlan: 148.17.36.2 (el mas nuevo)
KIO: 172.19.215.8  antes Inter Lomas, arrendado por RedIT- Interlomas

RedIT : 172.20.36.209 (HSM Viejo el primero de MN)

**************************************

Configurar el bloque <VirtualHost> para el sitio con SSL.

Busque el archivo de configuración de Apache para editar.

La ubicación y el nombre de este archivo puede variar de un servidor a otro - especialmente si usted utiliza una interfaz especial para administrar la configuración del servidor.

Archivos de configuración de Apache se encuentran normalmente en /etc/httpd. El archivo de configuración principal es generalmente llamado httpd.conf. En algunos casos el <VirtualHost> bloques será en la parte inferior de este archivo httpd.conf. A veces se encuentra la <VirtualHost> bloques en sus propios archivos en un directorio como /etc/httpd/vhosts.d/ o /etc/httpd/sitios/ o en un archivo llamado ssl.conf.

Si abre el archivo con un editor de texto, debe ser capaz de encontrar <VirtualHost> bloques que contienen la configuración de Apache.

Identificar el bloque de <VirtualHost> del sitio web en el cual desea activar SSL.

Si necesita que su sitio sea accesible tanto a través de conexión segura (https) y no seguros (HTTP), se necesita un servidor virtual para cada tipo de conexión. Haga una copia de la existente no seguro servidor virtual y configurarlo para SSL como se describe en el paso 4.

Si sólo necesita su sitio web para acceder de forma segura, configurar el host virtual existente para SSL como se describe en el paso 4.

A continuación se muestra un ejemplo muy simple de un host virtual configurado para SSL. Las partes en negrita son las partes que hay que añadir para la configuración de SSL:

<VirtualHost 192.168.0.1:443>
DocumentRoot /var/www/html2
ServerName su.dominio.com
SSLEngine on
SSLCertificateFile /ruta/a/su_dominio.crt
SSLCertificateKeyFile /ruta/a/su_dominio.key
SSLCertificateChainFile /ruta/a/DigiCertCA.crt
</VirtualHost>

**********************************
Agregar certificado a servidor

1) Tomar el certificado de esta url:
https://apiwebhcfdi.azurewebsites.net/api/ticket/consultaticket/NTczfDg4fDAxMDEyMDE5fDMxMTkwMnw1MHxU

Después se agrega el certificado a la carpeta tmp.

2) Actualizar o bien agregarlo en la ruta:
/etc/pki/java/cacerts

3) Con la instrucción:
keytool -import -trustcacerts -keystore /etc/pki/java/cacerts \
-storepass changeit -noprompt -alias mycert -file /tmp/certificado_mcdonalds.crt

Sería todo para agregar dicho certificado.

***************************************************
NTP

Haciendo el login a los servidores de PM y ejecutando el comando ntpdate -u ntp.pacmasnegocio.com para que sincronice la hora con el ntp instalado.
Esto es para que los servidores tenga la hora sincronizada con el NTP de mas negocio ya que es un requerimiento para ser emisor de timbrado por parte del SAT

**************************************

Pues con el topvimos que estaba en 100
Entonces de ahi aplicas el pstree como dijiste
pstree -p
Salian los del cron
service crond stop
Paramos ese pedo
Pstree -p de nuevo
para ver si parar el servicio del crond también paraba los procesos pero nel
ni merga jajaja
Este es el manual mas verga
añeñe
dentro del árbol del cron salen varias ramas
ya sabes un rpoceso padre tiene varios hijos
Empiezas por matar a los hijos y de ahí al padre
Tienes suerte si matas al padre y se van con el los hijos pero no siempre pasa asi
Así que fuimos matando por nombre y ya no por PID
normalmente es kill -9 PID
Aquí aplicas
pkill -9 nombre
pkill -9 backup_db69.sh
Ese era un hijo de perra del crond
Y así fui matando a los bastardos hijos
jajaja
De ahí desmontamos la carpeta respaldos
para que bajara mas en lo que seguiamos ejecutando procesos
umount -l /mnt/respaldos
ya que se desmonto la puta esa
matamos los procesos que se estaban montando
pkill -9 mount
los ultimos de cron
pkill -9 crond
había unos procesos de sh
como de conexión
Esos les di en su madre por el pid
con el PID *
kill -9 27524 27522 27494 27323 26588 26288 26287 26263 26069 26068 26045 25799 24347 22577 22576 22545
Así
Eran un verguero esos solo fueron los primeros
Porque no lo hicimos con pkill
porque podría ser que si lo matabamos así nos botaría a nosotros porque estamos conectados por ssh

vas matando
y le tiras psstree
para ir viendo si se quitan
y cuales vas quitando
nano fwk_db.php
Ahi ese verga vio algo que al chile no supe
jajajaja
Pero despues de eso cheque el mysql y estaba abajo
lo inicie de nuevo
y listo
ahhh
Volví a montar la carptea
para que los respaldos tuvieran donde caer
por eso llegaba la alerta
mount -t nfs -v  172.19.215.6:/respaldos /mnt/Respaldos/

***********************************************************

RENOVAR CERTIFICADO Let'sEncrypt

1. Verificamos la valides del certificado, lo podemos hacer desde el portal o desde terminal con el siguiente comand:
                        # openssl x509 -noout -dates -in /etc/letsencrypt/live/www.arbolesmajestuososdemexico.org/cert.pem

2.- Detenemos el servicio httpd para evitar el conflicto en el uso de la ip

                        # service httpd stop

3.- Nos posicionamos en el director donde se encuentra letsencrypt

                        # cd /opt/certbot-master

4.- Ejecutamos la renovacion del certificado lets

                        # ./letsencrypt-auto certonly --standalone --renew-by-default -d dominio.com -d www.dominio.com

5.- Reiniciamos el servicio httpd

                        # service httpd start

******************************************************+
[root@MNDANONET APP126]# rm -rf *2019
[root@MNDANONET APP126]# ll
total 0
[root@MNDANONET APP126]# cd ..
[root@MNDANONET Respaldos]# du -sh *
20K     APP126
15G     BD126
[root@MNDANONET Respaldos]# cd BD126/
[root@MNDANONET BD126]# rm -rf *2019
[root@MNDANONET BD126]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_mndanonet01-LogVolrz
                       21G  1.2G   18G   7% /
tmpfs                 1.9G     0  1.9G   0% /dev/shm
/dev/sda1             488M   69M  395M  15% /boot
/dev/mapper/vg_mndanonet02-LogVolu04
                       20G  9.5G  9.1G  52% /u04
/dev/mapper/vg_mndanonet03-LogVolusr
                       20G  8.9G  9.8G  48% /usr

du -sh *
df -u

**********************************************
Decathlon 192.168.20.219

*******************************************
SELECT
 table_schema "Base de Datos",
 sum( data_length + index_length ) / 1024 / 1024 / 1024 "Tamaño en GB"
FROM
  information_schema.TABLES WHERE table_schema='NOMBRE:BD' GROUP BY table_schema;


***************************************

GO DADDY

Usuario : 41866111
Password : K993#r$2p

**************************************

nuevo dominio
se agrega configuracion en el archivo conf (en este caso faces.conf )
buscas o asignas la ip publica en pfsense

******************************
